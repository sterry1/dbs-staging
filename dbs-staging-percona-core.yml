# need to construct the correct path
# derived from georce/maxscale and https://github.com/alyu/docker for percona xtra-db 5.6
core1:
  image: agaveapi/percona
  ports:
    - "3309:3306"
    - "4570:4567"
  volumes:
    - /mnt/data/ubuntu-pxc56/mysql-3:/var/lib/mysql
    - percona-my-core.cnf:/etc/mysql/my.cnf
  links:
    - core2

core2:
  image: agaveapi/percona
  ports:
    - "3310:3306"
    - "4571:4567"
  volumes:
    - /mnt/data/ubuntu-pxc56/mysql-4:/var/lib/mysql
    - percona-my-core.cnf:/etc/mysql/my.cnf
  links:
    - core1

maxscale1:
  image: agaveapi/maxscale:latest
  ports:
    - "3301:3306"
  environment:
    - user=pxcuser
    - passwd=pxcpass
  volumes:
    - pxc-MaxScale-core.cnf:/usr/local/skysql/maxscale/etc/MaxScale.cnf
  links:
    - core1
    - core2
